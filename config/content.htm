<h1>About</h1>
<p>èª²ç¨‹åç¨±: è¨ˆç®—æ©Ÿç¨‹å¼</p>
<p>githubå€‰åº«ï¼š<a href="https://github.com/41423230zhang/W3">https://github.com/41423230zhang/W3</a></p>
<p>èª²ç¨‹è©•åˆ†:</p>
<p style="padding-left: 30px;"><span style="background-color: #ffff00;">å­¸ç¿’å¿ƒå¾—å ±å‘Š (60%)</span> - MS Teams ç·šä¸Šåƒèˆ‡ï¼Œ<span style="background-color: #ccffcc;">6äººä¸€çµ„</span>æ¯ä¸‰é€±ç™¼è¡¨å­¸ç¿’å¿ƒå¾—ã€‚</p>
<p style="padding-left: 60px;">w3ã€w7ã€w10ã€w14ã€w17ã€w18</p>
<p style="padding-left: 60px;">å­¸ç¿’å¿ƒå¾—å ±å‘Šä¸»é¡Œ:</p>
<p style="padding-left: 60px;">w3: ä»€éº¼æ˜¯ git, GitHub, gist èˆ‡ cmsimde? å¦‚ä½•ä½¿ç”¨é€™äº›å·¥å…·ï¼Ÿç‚ºä»€éº¼è¦ä½¿ç”¨é€™äº›å·¥å…·ï¼Ÿ (<a href="https://mde.tw/cp2025/content/Brython.html?src=https://gist.githubusercontent.com/mdecycu/71ff1c69dd233e6a5a83dd60997950de/raw/b4134dc3724f9c6aa1de7534a74f298288de0fa5/round_dot_move.py">å‹•æ…‹æ¨¡æ“¬</a>)</p>
<p style="padding-left: 60px;">w7: Brython æ˜¯ä»€éº¼ï¼Ÿå¦‚ä½•åœ¨ç€è¦½å™¨é…ç½® Brython ç’°å¢ƒï¼Ÿ Brython èƒ½åšä»€éº¼ï¼Ÿ (<a href="https://mde.tw/cp2025/content/Brython.html">Brython</a>, <a href="https://mde.tw/cp2025/content/Robot_ex.html">Examples</a>)</p>
<p style="padding-left: 60px;">w10: å¦‚ä½•åœ¨ç€è¦½å™¨ä¸­æ¨¡æ“¬æ©Ÿå™¨äººä½œå‹•ï¼Ÿ (<a href="https://mde.tw/cp2025/content/Brython.html?src=https://gist.githubusercontent.com/mdecycu/58fed8bd2f5be98a6456a8dcae512011/raw/4019adba4ee4be19c35982d835bad8e7d83a7b2f/brython_robot4_ex1.py">æ©Ÿå™¨äººä½œå‹•</a>)</p>
<p style="padding-left: 60px;">w14: åœ¨ç€è¦½å™¨ä¸­æ¨¡æ“¬æ©Ÿå™¨äººä½œå‹•çš„ç›®çš„æ˜¯ä»€éº¼ï¼Ÿ (<a href="/downloads/otto_robot.7z">otto_robot.7z</a>,Â <a href="https://mde.tw/cad2025/content/Homework.html">Plotter</a>,Â <a href="/downloads/open_duck_mini.7z">open_duck_mini.7z</a> ,<a href="https://webots.cloud/AcTNYs0">https://webots.cloud/AcTNYs0</a>)</p>
<p style="padding-left: 60px;">w17 (<span style="background-color: #ccffcc;">1b æ¡ Youtube å½±ç‰‡ç°¡å ±</span>): è¨ˆç®—æ©Ÿç¨‹å¼èª²ç¨‹å­¸åˆ°äº†ä»€éº¼ï¼Ÿ</p>
<p style="padding-left: 60px;">w18: èª²ç¨‹ç¸½çµ</p>
<p style="padding-left: 30px;"><span style="background-color: #ffff00;">å€‹äººèˆ‡åˆ†çµ„ç¶²ç«™ç¶­è­· (40%)</span> - æ¯é€±è‡³å°‘å…©æ¬¡æ¨é€èˆ‡èª²ç¨‹é€²åº¦ç›¸é—œçš„å­¸ç¿’å…§å®¹èˆ‡å¿ƒå¾—ã€‚</p>
<p style="padding-left: 60px;">w9 æœŸä¸­è‡ªè©•ã€w18 æœŸæœ«è‡ªè©•</p><h1>Code</h1>
<p><a href="https://mde.tw/cp2025/content/Brython.html?src=https://gist.githubusercontent.com/41423230zhang/763a418467cd0cdf5939d5f6226df750/raw/c37d9df6d7a5b121a2b53f99d867373d59b0eae4/w3_1.py">w3_1</a></p>
<pre class="brush:py;auto-links:false;toolbar:false" contenteditable="false">################################################
# ä»¥ä¸‹ç‚ºå°å…¥ brython_robot é€²è¡Œå‹•æ…‹æ¨¡æ“¬çš„èµ·å§‹å…§å®¹
################################################
# å°å…¥ brython_robot.py ä¸¦è¨­ç‚º robot
import brython_robot as robot
# å°å…¥ Brython browser æ¨¡çµ„ä¸­çš„ timer
# ä»¥ä¾¿è®“ AnimatedRobot å¯ä»¥æ­£å¸¸é‹ä½œ
from browser import timer

# åˆå§‹åŒ–ä¸–ç•Œèˆ‡æ©Ÿå™¨äºº
# åˆ©ç”¨ robot ç‰©ä»¶ä¸­çš„ World æ–¹æ³•
# å»ºç«‹ä¸€å€‹ 10x10 çš„æ¨¡æ“¬ä¸–ç•Œ
xx=11
yy=9
w = robot.World(11,9)
x = xx-1
y = yy//2
z = yy
k = xx
# åˆ©ç”¨ robot ç‰©ä»¶çš„ AnimatedRobot æ–¹æ³•
# é‡å° w é€²è¡Œå‹•æ…‹æ¨¡æ“¬, ä¸”è®“æ©Ÿå™¨äººä½æ–¼ (1, 1)
r = robot.AnimatedRobot(w, 1, 1)
################################################
# ç¯„ä¾‹ 1
# åŸºæœ¬è®Šæ•¸èˆ‡æ•¸å€¼æ“ä½œ
################################################
# r ç‚ºé€éä¸Šåˆ—ç¨‹å¼æ‰€å»ºç«‹çš„å‹•æ…‹æ¨¡æ“¬æ©Ÿå™¨äººç‰©ä»¶
steps = 3
# è®“æ©Ÿå™¨äººå¾€å‰ç§»å‹• steps æ­¥æ•¸
def turn_left():
    r.turn_left()
    r.turn_left()
    r.turn_left()
for two_line in range(y):
    r.move(x)
    r.turn_left()
    r.move(1)
    r.turn_left()
    r.move(x)
    turn_left()
    r.move(1)
    turn_left()
if z % 2 != 0:
    r.move(k-1)</pre>
<p></p>
<p><a href="https://mde.tw/cp2025/content/Brython.html?src=https://gist.githubusercontent.com/41423230zhang/f426135ece9b6ca0cbd4a57974bca0ec/raw/609f56f72e60478ba602839cc68c8582547a52cb/gistfile1.txt">w3_2</a></p>
<pre class="brush:py;auto-links:false;toolbar:false" contenteditable="false"># åˆå§‹åŒ–ä¸–ç•Œèˆ‡æ©Ÿå™¨äºº
# åˆ©ç”¨ robot ç‰©ä»¶ä¸­çš„ World æ–¹æ³•
# å»ºç«‹ä¸€å€‹ 10x10 çš„æ¨¡æ“¬ä¸–ç•Œ
xx=11
yy=9
w = robot.World(xx,yy)
x = xx//2
y = yy-1
z = xx
k = yy
# åˆ©ç”¨ robot ç‰©ä»¶çš„ AnimatedRobot æ–¹æ³•
# é‡å° w é€²è¡Œå‹•æ…‹æ¨¡æ“¬, ä¸”è®“æ©Ÿå™¨äººä½æ–¼ (1, 1)
r = robot.AnimatedRobot(w, 1, 1)
################################################
# ç¯„ä¾‹ 1
# åŸºæœ¬è®Šæ•¸èˆ‡æ•¸å€¼æ“ä½œ
################################################
# r ç‚ºé€éä¸Šåˆ—ç¨‹å¼æ‰€å»ºç«‹çš„å‹•æ…‹æ¨¡æ“¬æ©Ÿå™¨äººç‰©ä»¶
steps = 3
# è®“æ©Ÿå™¨äººå¾€å‰ç§»å‹• steps æ­¥æ•¸
def turn_left():
r.turn_left()
r.turn_left()
r.turn_left()
for two_line in range(x):
r.turn_left()
r.move(y)
turn_left()
r.move(1)
turn_left()
r.move(y)
r.turn_left()
r.move(1)
if z % 2 != 0:
r.turn_left()
r.move(k-1)</pre>
<p><a href="https://mde.tw/cp2025/content/Brython.html?src=https://gist.githubusercontent.com/41423230zhang/7081c7e053769a5fe035e3a2f707b672/raw/2aab9223799cc92cc03a4c736bc8ce9e8256c842/1b_stud_list.py">1b_w4_showup.py</a></p>
<pre class="brush:py;auto-links:false;toolbar:false" contenteditable="false">import pandas as pd

# === è®€å–å…¨ç­å­¸ç”Ÿåå–®ï¼ˆå­¸è™Ÿ\tå§“åï¼‰ ===
stud_df = pd.read_csv("1b_stud_list.csv", encoding='utf-8')
stud_df.drop_duplicates(subset=[stud_df.columns[0]], inplace=True)

# å»ºç«‹å§“åâ†’å­¸è™Ÿå­—å…¸
name_to_num = {}
for row in stud_df.iloc[:, 0]:
    parts = row.split('\t')
    if len(parts) &gt;= 2:
        student_num = parts[0].strip()
        student_name = parts[1].strip()
        name_to_num[student_name] = student_num

# === è®€å–å‡ºå¸­åå–® ===
show_df = pd.read_csv("1b_w4.csv", encoding='utf-16')
show_df.drop_duplicates(subset=[show_df.columns[0]], inplace=True)
names_list = show_df.iloc[:, 0].dropna().tolist()

# å°‡å‡ºå¸­å§“åè½‰ç‚ºå­¸è™Ÿ
showup_nums = []
for name in names_list:
    if isinstance(name, str):
        student_name = name.split('\t')[0].strip()  # åªå–å§“åéƒ¨åˆ†
        if student_name in name_to_num:
            showup_nums.append(name_to_num[student_name])

# å»é‡ä¸¦ä¾å­¸è™Ÿæ’åº
showup_nums = sorted(list(set(showup_nums)), key=lambda x: int(x))

# === è¼¸å‡º CSV ===
pd.DataFrame(showup_nums, columns=["å­¸è™Ÿ"]).to_csv("1b_w4_showup.csv", index=False, encoding="utf-8-sig")

print(f"âœ… å·²å°‡å‡ºå¸­åå–®è½‰ç‚ºå­¸è™Ÿä¸¦è¼¸å‡ºè‡³ 1b_w4_showup.csvï¼Œå…± {len(showup_nums)} ä½å­¸ç”Ÿ")
</pre>
<p>1b_stud_list.py</p>
<pre class="brush:py;auto-links:false;toolbar:false" contenteditable="false">import pandas as pd

# === è®€å–å…¨ç­å­¸ç”Ÿåå–® ===
stud_df = pd.read_csv("1b_stud_list.csv", encoding='utf-8')
stud_df.drop_duplicates(subset=[stud_df.columns[0]], inplace=True)

# å»ºç«‹å§“åâ†’å­¸è™Ÿå­—å…¸
a_dict = {}
for row in stud_df.iloc[:, 0]:
    parts = row.split('\t')
    if len(parts) &gt;= 2:
        student_num = parts[0].strip()
        student_name = parts[1].strip()
        a_dict[student_name] = student_num

# å…¨éƒ¨å­¸ç”Ÿåå–®
all_students = set(a_dict.keys())

# === è®€å–å‡ºå¸­åå–® ===
show_df = pd.read_csv("1b_w4.csv", encoding='utf-16')
show_df.drop_duplicates(subset=[show_df.columns[0]], inplace=True)
names_list = show_df.iloc[:, 0].dropna().tolist()

# æ•´ç†å‡ºå¸­åå–®
showup_names = set()
for entry in names_list:
    if isinstance(entry, str):
        parts = entry.split('\t')
        student_name = parts[0].strip() if len(parts) &gt;= 1 else entry.strip()
        if student_name:
            showup_names.add(student_name)

# === æ¯”å°å‡ºå¸­èˆ‡ç¼ºå¸­ ===
present_names = showup_names &amp; all_students
absent_names = all_students - showup_names

# è½‰æ›æˆåˆ—è¡¨ï¼ˆå­¸è™Ÿã€å§“åï¼‰
# é€™è£¡åŠ ä¸Š key=lambda x: int(x[0])ï¼Œä¾å­¸è™Ÿæ•¸å€¼æ’åº
present_list = sorted([(a_dict[name], name) for name in present_names], key=lambda x: int(x[0]))
absent_list = sorted([(a_dict[name], name) for name in absent_names], key=lambda x: int(x[0]))

# === è¼¸å‡ºçµæœ ===
print("âœ… å‡ºå¸­åå–®ï¼ˆä¾åº§è™Ÿæ’åºï¼‰ï¼š")
for i, (num, name) in enumerate(present_list, start=1):
    print(f"{i:2d}. {num}\t{name}")

print("\nâŒ ç¼ºå¸­åå–®ï¼ˆä¾åº§è™Ÿæ’åºï¼‰ï¼š")
for i, (num, name) in enumerate(absent_list, start=1):
    print(f"{i:2d}. {num}\t{name}")

# === è¼¸å‡º CSV ===
pd.DataFrame(present_list, columns=["å­¸è™Ÿ", "å§“å"]).to_csv("1b_present.csv", index=False, encoding="utf-8-sig")
pd.DataFrame(absent_list, columns=["å­¸è™Ÿ", "å§“å"]).to_csv("1b_absent.csv", index=False, encoding="utf-8-sig")

print("\nğŸ“ å·²è¼¸å‡ºå…©ä»½æª”æ¡ˆï¼š1b_present.csvï¼ˆå‡ºå¸­ï¼‰èˆ‡ 1b_absent.csvï¼ˆç¼ºå¸­ï¼‰")
</pre>
<p><a href="https://mde.tw/cp2025/content/Brython.html?src=https://gist.githubusercontent.com/41423230zhang/615587b6029cf46170ef3a2fda826f38/raw/0523868027b2ebbbbd693ba9491352c95dd29e4e/1b_stud_list.py">1b_w4_showup.py</a></p>
<pre class="brush:py;auto-links:false;toolbar:false" contenteditable="false">import pandas as pd

# === è®€å–å…¨ç­å­¸ç”Ÿåå–®ï¼ˆå­¸è™Ÿ\tå§“åï¼‰ ===
stud_df = pd.read_csv("1b_stud_list.csv", encoding='utf-8')
stud_df.drop_duplicates(subset=[stud_df.columns[0]], inplace=True)

# å»ºç«‹å§“åâ†’å­¸è™Ÿå­—å…¸
name_to_num = {}
for row in stud_df.iloc[:, 0]:
    parts = row.split('\t')
    if len(parts) &gt;= 2:
        student_num = parts[0].strip()
        student_name = parts[1].strip()
        name_to_num[student_name] = student_num

# === è®€å–å‡ºå¸­åå–® ===
show_df = pd.read_csv("1b_w4.csv", encoding='utf-16')
show_df.drop_duplicates(subset=[show_df.columns[0]], inplace=True)
names_list = show_df.iloc[:, 0].dropna().tolist()

# å°‡å‡ºå¸­å§“åè½‰ç‚ºå­¸è™Ÿ
showup_nums = []
for name in names_list:
    if isinstance(name, str):
        student_name = name.split('\t')[0].strip()  # åªå–å§“åéƒ¨åˆ†
        if student_name in name_to_num:
            showup_nums.append(name_to_num[student_name])

# å»é‡ä¸¦ä¾å­¸è™Ÿæ’åº
showup_nums = sorted(list(set(showup_nums)), key=lambda x: int(x))

# === è¼¸å‡º CSV ===
pd.DataFrame(showup_nums, columns=["å­¸è™Ÿ"]).to_csv("1b_w4_showup.csv", index=False, encoding="utf-8-sig")

print(f"âœ… å·²å°‡å‡ºå¸­åå–®è½‰ç‚ºå­¸è™Ÿä¸¦è¼¸å‡ºè‡³ 1b_w4_showup.csvï¼Œå…± {len(showup_nums)} ä½å­¸ç”Ÿ")
</pre>
<p></p><h1>Brython</h1>
<p><a href="https://brython.info/">Brython</a> æ˜¯ä¸€å€‹å°‡ <a href="https://en.wikipedia.org/wiki/Python_(programming_language)">Python</a> èªæ³•ç·¨è­¯ç‚º <a href="https://developer.mozilla.org/zh-TW/docs/Web/JavaScript">JavaScript</a> çš„å·¥å…·ï¼Œèƒ½ç›´æ¥åœ¨ç€è¦½å™¨ä¸­ä»¥ <a href="https://en.wikipedia.org/wiki/Python_(programming_language)">Python</a> æ’°å¯«å‰ç«¯ç¶²é ç¨‹å¼ã€‚</p>
<p><button id="add1to100">1 add to 100</button><button id="robot1">æ©Ÿå™¨äººå·¡é‚</button><button id="free_walk">è‡ªç”±è¡Œ</button></p>
<!-- å°å…¥ brython ç¨‹å¼åº« -->
<p>
<script src="/static/brython.js"></script>
<script src="/static/brython_stdlib.js"></script>
</p>
<!-- å•Ÿå‹• Brython -->
<p>
<script>
window.onload=function(){
brython({debug:1, pythonpath:['/static/','./../downloads/py/']});
}
</script>
</p>
<p><!-- å°å…¥ FileSaver èˆ‡ filereader --></p>
<p>
<script src="/static/ace/FileSaver.min.js" type="text/javascript"></script>
<script src="/static/ace/filereader.js" type="text/javascript"></script>
</p>
<p><!-- å°å…¥ ace --></p>
<p>
<script src="/static/ace/ace.js" type="text/javascript"></script>
<script src="/static/ace/ext-language_tools.js" type="text/javascript"></script>
<script src="/static/ace/mode-python3.js" type="text/javascript"></script>
<script src="/static/ace/snippets/python.js" type="text/javascript"></script>
</p>
<p><!-- å°å…¥ gearUtils-0.9.js Cango é½’è¼ªç¹ªåœ–ç¨‹å¼åº« -->
<script src="/static/Cango-24v03-min.js"></script>
<script src="/static/gearUtils-09.js"></script>
<script src="/static/SVGpathUtils-6v03-min.js"></script>
<script src="/static/sylvester.js"></script>
<script src="/static/PrairieDraw.js"></script>
</p>
<p><!-- è«‹æ³¨æ„, é€™è£¡ä½¿ç”¨ Javascript å°‡ localStorage["kw_py_src1"] ä¸­å­˜åœ¨è¿‘ç«¯ç€è¦½å™¨çš„ç¨‹å¼ç¢¼, ç”±ä½¿ç”¨è€…æ±ºå®šå­˜æª”åç¨±--></p>
<p>
<script type="text/javascript">
function doSave(storage_id, filename){
    var blob = new Blob([localStorage[storage_id]], {type: "text/plain;charset=utf-8"});
    filename = document.getElementById(filename).value
    saveAs(blob, filename+".py");
}
</script>
</p>
<p><!-- ç´¯åŠ ç¨‹å¼é–‹å§‹ -->
<script type="text/python3">
from browser import document as doc
import ace
# æ¸…é™¤ç•«å¸ƒ
def clear_bd1(ev):
    bd = doc["brython_div1"]
    bd.clear()
Ace1 = ace.Editor(editor_id="kw_editor1", console_id="kw_console1", container_id="kw__container1", storage_id="kw_py_src1" )
# å¾ gist å–å‡ºç¨‹å¼ç¢¼å¾Œ, æ”¾å…¥ editor ä½œç‚º default ç¨‹å¼
def run1():
    # åˆ©ç”¨ get å–ä¸‹ src è®Šæ•¸å€¼
    try:
        url = doc.query["src"]
    except:
        url = "https://gist.githubusercontent.com/mdecourse/0229a8a017091476a79700b8a190f185/raw/c3a6deaf717f8f2739a4b1392a5ab10936e9693a/from_1_add_to_10_1.py"
    prog = open(url).read()

    # å°‡ç¨‹å¼è¼‰å…¥ç·¨è¼¯å€
    Ace1.editor.setValue(prog)
    Ace1.editor.scrollToRow(0)
    Ace1.editor.gotoLine(0)
    # ç›´æ¥åŸ·è¡Œç¨‹å¼
    #ns = {'__name__':'__main__'}
    #exec(prog, ns)
    # æŒ‰ä¸‹ run æŒ‰éˆ•
    Ace1.run()
# åŸ·è¡Œç¨‹å¼, é¡¯ç¤ºè¼¸å‡ºçµæœèˆ‡æ¸…é™¤è¼¸å‡ºçµæœåŠå°æ‡‰æŒ‰éˆ•ç¶å®š
doc['kw_run1'].bind('click', Ace1.run)
doc['kw_show_console1'].bind('click', Ace1.show_console)
doc['kw_clear_console1'].bind('click', Ace1.clear_console)
doc['clear_bd1'].bind('click', clear_bd1)
# å‘¼å«å‡½å¼åŸ·è¡Œ
run1()
</script>
<!-- ç´¯åŠ ç¨‹å¼çµæŸ --> <!-- æ©Ÿå™¨äººå·¡é‚ç¨‹å¼é–‹å§‹ -->
<script type="text/python3">
from browser import document as doc
import ace

# æ¸…é™¤ç•«å¸ƒ
def clear_bd1(ev):
    bd = doc["brython_div1"]
    bd.clear()

# åˆ©ç”¨ ace ä¸­çš„ Editor å»ºç«‹ Ace2 ç‰©ä»¶, å…¶ä¸­çš„è¼¸å…¥è®Šæ•¸åˆ†åˆ¥å°æ‡‰åˆ°é é¢ä¸­çš„ç·¨è¼¯å€ç‰©ä»¶
Ace2 = ace.Editor(editor_id="kw_editor1", console_id="kw_console1", container_id="kw__container1", storage_id="kw_py_src1" )

robot1_url = "https://gist.githubusercontent.com/mdecycu/ec4bb35dd0769e7a83d2a9fa57878a67/raw/b33c5fc2a0774f8c5d2b0e8c7c7908e58d73bb94/robot_1.py"

# å¾ gist å–å¾—ç¨‹å¼ç¢¼
robot1_src = open(robot1_url).read()
def robot1(ev):
    Ace2.editor.setValue(robot1_src)
    Ace2.editor.scrollToRow(0)
    Ace2.editor.gotoLine(0)
    Ace2.run()

# id ç‚º "robot1" çš„æŒ‰éˆ•é»æŒ‰æ™‚, åŸ·è¡Œ robot1 æ–¹æ³•
doc["robot1"].bind('click', robot1)
</script>
<!-- æ©Ÿå™¨äººå·¡é‚ç¨‹å¼çµæŸ --></p>
<!-- æ©Ÿå™¨äººè‡ªç”±è¡Œç¨‹å¼é–‹å§‹ -->
<p>
<script type="text/python3">
from browser import document as doc
import ace

# æ¸…é™¤ç•«å¸ƒ
def clear_bd1(ev):
    bd = doc["brython_div1"]
    bd.clear()

# åˆ©ç”¨ ace ä¸­çš„ Editor å»ºç«‹ Ace2 ç‰©ä»¶, å…¶ä¸­çš„è¼¸å…¥è®Šæ•¸åˆ†åˆ¥å°æ‡‰åˆ°é é¢ä¸­çš„ç·¨è¼¯å€ç‰©ä»¶
Ace2 = ace.Editor(editor_id="kw_editor1", console_id="kw_console1", container_id="kw__container1", storage_id="kw_py_src1" )

free_walk_url = "https://gist.githubusercontent.com/mdecycu/ec4bb35dd0769e7a83d2a9fa57878a67/raw/9d55811467e411eb89f74171d8a586ae9f1a96aa/brython_robot_free_walk.py"

# å¾ gist å–å¾—ç¨‹å¼ç¢¼
free_walk_src = open(free_walk_url).read()
def free_walk(ev):
    Ace2.editor.setValue(free_walk_src)
    Ace2.editor.scrollToRow(0)
    Ace2.editor.gotoLine(0)
    Ace2.run()

# id ç‚º "free_walk" çš„æŒ‰éˆ•é»æŒ‰æ™‚, åŸ·è¡Œ robot1 æ–¹æ³•
doc["free_walk"].bind('click', free_walk)
</script>
</p>
<!-- æ©Ÿå™¨äººè‡ªç”±è¡Œç¨‹å¼çµæŸ -->
<p><!-- add 1 to 100 é–‹å§‹ -->
<script type="text/python3">
from browser import document as doc
import ace

# æ¸…é™¤ç•«å¸ƒ
def clear_bd1(ev):
    bd = doc["brython_div1"]
    bd.clear()

# åˆ©ç”¨ ace ä¸­çš„ Editor å»ºç«‹ Ace2 ç‰©ä»¶, å…¶ä¸­çš„è¼¸å…¥è®Šæ•¸åˆ†åˆ¥å°æ‡‰åˆ°é é¢ä¸­çš„ç·¨è¼¯å€ç‰©ä»¶
Ace2 = ace.Editor(editor_id="kw_editor1", console_id="kw_console1", container_id="kw__container1", storage_id="kw_py_src1" )

add1to100_url = "https://gist.githubusercontent.com/mdecourse/0229a8a017091476a79700b8a190f185/raw/c48e37714f055c3a0027cbfef59e442a6ef659b9/from_1_add_to_100_1.py"

# å¾ gist å–å¾—ç¨‹å¼ç¢¼
add_src = open(add1to100_url).read()
def add(ev):
    Ace2.editor.setValue(add_src)
    Ace2.editor.scrollToRow(0)
    Ace2.editor.gotoLine(0)
    Ace2.run()

# id ç‚º "add1to100" çš„æŒ‰éˆ•é»æŒ‰æ™‚, åŸ·è¡Œ add æ–¹æ³•
doc["add1to100"].bind('click', add)
</script>
</p>
<p><!-- add 1 to 100 çµæŸ--></p>
<!-- editor1 é–‹å§‹ -->
<p><!-- ç”¨ä¾†é¡¯ç¤ºç¨‹å¼ç¢¼çš„ editor å€åŸŸ --></p>
<div id="kw_editor1" style="width: 600px; height: 300px;"></div>
<p><!-- ä»¥ä¸‹çš„è¡¨å–®èˆ‡æŒ‰éˆ•èˆ‡å‰é¢çš„ Javascript doSave å‡½å¼ä»¥åŠ FileSaver.min.js äº’ç›¸é…åˆ --></p>
<p><!-- å­˜æ“‹è¡¨å–®é–‹å§‹ --></p>
<form><label>Filename: <input id="kw_filename" placeholder="input file name" type="text"/>.py</label> <input onclick="doSave('kw_py_src1', 'kw_filename1');" type="submit" value="Save"/></form>
<p><!-- å­˜æ“‹è¡¨å–®çµæŸ --></p>
<p></p>
<p><!-- åŸ·è¡Œèˆ‡æ¸…é™¤æŒ‰éˆ•é–‹å§‹ --></p>
<p><button id="kw_run1">Run</button> <button id="kw_show_console1">Output</button> <button id="kw_clear_console1">æ¸…é™¤è¼¸å‡ºå€</button><button id="clear_bd1">æ¸…é™¤ç¹ªåœ–å€</button><button onclick="window.location.reload()">Reload</button></p>
<p><!-- åŸ·è¡Œèˆ‡æ¸…é™¤æŒ‰éˆ•çµæŸ --></p>
<p></p>
<p><!-- ç¨‹å¼åŸ·è¡Œ ouput å€ --></p>
<div style="width: 100%; height: 100%;"><textarea autocomplete="off" id="kw_console1"></textarea></div>
<p><!-- Brython ç¨‹å¼åŸ·è¡Œçš„çµæœ, éƒ½ä»¥ brython_div1 ä½œç‚ºåˆ‡å…¥ä½ç½® --></p>
<div id="brython_div1"></div>
<!-- editor1 çµæŸ --><hr/><!-- ########################################## -->
<p>å¾ 1 ç´¯åŠ åˆ° 100 part2:</p>
<p><button id="add1to100part2">1 add to 100</button><button id="cango_three_gears">cango_three_gears</button><button id="bsnake">BSnake</button><button id="aitetris">AI Tetris</button></p>
<p><!-- è«‹æ³¨æ„, é€™è£¡ä½¿ç”¨ Javascript å°‡ localStorage["kw_py_src2"] ä¸­å­˜åœ¨è¿‘ç«¯ç€è¦½å™¨çš„ç¨‹å¼ç¢¼, ç”±ä½¿ç”¨è€…æ±ºå®šå­˜æª”åç¨±--></p>
<p>
<script type="text/python3">
from browser import document as doc
import ace
# æ¸…é™¤ç•«å¸ƒ
def clear_bd2(ev):
    bd = doc["brython_div2"]
    bd.clear()
Ace3 = ace.Editor(editor_id="kw_editor2", console_id="kw_console2", container_id="kw__container2", storage_id="kw_py_src2" )
# å¾ gist å–å‡ºç¨‹å¼ç¢¼å¾Œ, æ”¾å…¥ editor ä½œç‚º default ç¨‹å¼
def run2():
    # åˆ©ç”¨ get å–ä¸‹ src è®Šæ•¸å€¼
    try:
        url = doc.query["src2"]
    except:
        url = "https://gist.githubusercontent.com/mdecourse/0229a8a017091476a79700b8a190f185/raw/c3a6deaf717f8f2739a4b1392a5ab10936e9693a/from_1_add_to_10_1.py"
    prog = open(url).read()

    # å°‡ç¨‹å¼è¼‰å…¥ç·¨è¼¯å€
    Ace3.editor.setValue(prog)
    Ace3.editor.scrollToRow(0)
    Ace3.editor.gotoLine(0)
    # ç›´æ¥åŸ·è¡Œç¨‹å¼
    #ns = {'__name__':'__main__'}
    #exec(prog, ns)
    # æŒ‰ä¸‹ run æŒ‰éˆ•
    Ace3.run()

# åŸ·è¡Œç¨‹å¼, é¡¯ç¤ºè¼¸å‡ºçµæœèˆ‡æ¸…é™¤è¼¸å‡ºçµæœåŠå°æ‡‰æŒ‰éˆ•ç¶å®š
doc['kw_run2'].bind('click', Ace3.run)
doc['kw_show_console2'].bind('click', Ace3.show_console)
doc['kw_clear_console2'].bind('click', Ace3.clear_console)
doc['clear_bd2'].bind('click', clear_bd2)
# å‘¼å«å‡½å¼åŸ·è¡Œ
run2()
</script>
</p>
<p><!-- add 1 to 100 part2 é–‹å§‹ -->
<script type="text/python3">
from browser import document as doc
import ace

# æ¸…é™¤ç•«å¸ƒ
def clear_bd2(ev):
    bd = doc["brython_div2"]
    bd.clear()

# åˆ©ç”¨ ace ä¸­çš„ Editor å»ºç«‹ Ace2 ç‰©ä»¶, å…¶ä¸­çš„è¼¸å…¥è®Šæ•¸åˆ†åˆ¥å°æ‡‰åˆ°é é¢ä¸­çš„ç·¨è¼¯å€ç‰©ä»¶
Ace4 = ace.Editor(editor_id="kw_editor2", console_id="kw_console2", container_id="kw__container2", storage_id="kw_py_src2" )

# é€é Ace4 ä»¥é¡åˆ¥å»ºç«‹ä¸€å€‹é€šç”¨çš„ button2, å¯ä»¥åœ¨å¤šå€‹æ¡ˆä¾‹ä¸­å°‡ gist ç¨‹å°å…¥ç·¨è¼¯å€

class button2:
    def __init__(self, url):
        self.url = url

    # è¨˜å¾—åŠ å…¥ event è¼¸å…¥è®Šæ•¸
    def do(self,ev):
        Ace4.editor.setValue(open(self.url).read())
        Ace4.editor.scrollToRow(0)
        Ace4.editor.gotoLine(0)
        Ace4.run()

add1to100_url = "https://gist.githubusercontent.com/mdecourse/0229a8a017091476a79700b8a190f185/raw/c48e37714f055c3a0027cbfef59e442a6ef659b9/from_1_add_to_100_1.py"

# å¾ gist å–å¾—ç¨‹å¼ç¢¼
add_src = open(add1to100_url).read()
def add2(ev):
    Ace4.editor.setValue(add_src)
    Ace4.editor.scrollToRow(0)
    Ace4.editor.gotoLine(0)
    Ace4.run()

# id ç‚º "add1to100part2" çš„æŒ‰éˆ•é»æŒ‰æ™‚, åŸ·è¡Œ add æ–¹æ³•
doc["add1to100part2"].bind('click', add2)
# ä»¥ä¸‹ç‚ºé‹ç”¨ button2 class çš„é€šç”¨ gist ç¨‹å¼å°å…¥å€
################################## cango_three_gears start
cango_three_gears_url = "https://gist.githubusercontent.com/mdecycu/d9082d678096bd58378d6afe2c7fa05d/raw/f7a85d737d6723d5e34c526d5daee990ed92c32b/cango_three_gears_brython_div2.py"
cango_three_gears = button2(cango_three_gears_url)
doc["cango_three_gears"].bind("click", cango_three_gears.do)
################################## cango_three_gears end
################################## bsnake start
bsnake_url = "https://gist.githubusercontent.com/mdecycu/d9082d678096bd58378d6afe2c7fa05d/raw/f7a85d737d6723d5e34c526d5daee990ed92c32b/kmol_snakey.py"
bsnake = button2(bsnake_url)
doc["bsnake"].bind("click", bsnake.do)
################################## bsnake end
################################## aitetris start
aitetris_url = "https://gist.githubusercontent.com/mdecycu/d9082d678096bd58378d6afe2c7fa05d/raw/f7a85d737d6723d5e34c526d5daee990ed92c32b/pygame_to_brython_tetris_ai.py"
aitetris = button2(aitetris_url)
doc["aitetris"].bind("click", aitetris.do)
################################## aitetris end
</script>
</p>
<p><!-- add 1 to 100 part2 çµæŸ--></p>
<!-- editor2 é–‹å§‹ -->
<p><!-- ç”¨ä¾†é¡¯ç¤ºç¨‹å¼ç¢¼çš„ editor å€åŸŸ --></p>
<div id="kw_editor2" style="width: 600px; height: 300px;"></div>
<p><!-- ä»¥ä¸‹çš„è¡¨å–®èˆ‡æŒ‰éˆ•èˆ‡å‰é¢çš„ Javascript doSave å‡½å¼ä»¥åŠ FileSaver.min.js äº’ç›¸é…åˆ --></p>
<p><!-- å­˜æ“‹è¡¨å–®é–‹å§‹ --></p>
<form><label>Filename: <input id="kw_filename2" placeholder="input file name" type="text"/>.py</label> <input onclick="doSave('kw_py_src2', 'kw_filename2');" type="submit" value="Save"/></form>
<p><!-- å­˜æ“‹è¡¨å–®çµæŸ --></p>
<p></p>
<p><!-- åŸ·è¡Œèˆ‡æ¸…é™¤æŒ‰éˆ•é–‹å§‹ --></p>
<p><button id="kw_run2">Run</button> <button id="kw_show_console2">Output</button> <button id="kw_clear_console2">æ¸…é™¤è¼¸å‡ºå€</button><button id="clear_bd2">æ¸…é™¤ç¹ªåœ–å€</button><button onclick="window.location.reload()">Reload</button></p>
<p><!-- åŸ·è¡Œèˆ‡æ¸…é™¤æŒ‰éˆ•çµæŸ --></p>
<p></p>
<p><!-- ç¨‹å¼åŸ·è¡Œ ouput å€ --></p>
<div style="width: 100%; height: 100%;"><textarea autocomplete="off" id="kw_console2"></textarea></div>
<p><!-- Brython ç¨‹å¼åŸ·è¡Œçš„çµæœ, éƒ½ä»¥ brython_div1 ä½œç‚ºåˆ‡å…¥ä½ç½® --></p>
<div id="brython_div2"></div>
<!-- editor2 çµæŸ --><hr/>
<p></p>
<h2>Pyodide3</h2>
<p>Pyodide3 å‰‡åœ¨ <a href="https://mde.tw/cp2025/content/Pyodide.html">Pyodide</a> èˆ‡ <a href="https://mde.tw/cp2025/content/Pyodide2.html">Pyodide2</a> é é¢æ¶æ§‹ä¸‹ï¼Œé€²ä¸€æ­¥å°å…¥ <a href="https://gist.githubusercontent.com/mdecycu/ec4bb35dd0769e7a83d2a9fa57878a67/raw/9f43571ec070ea3e24b083525ee27275a96efcc8/robot_w_world.py">robot_w_world.py</a>ï¼Œåœ¨æ—¢æœ‰çš„æ°´å¹³åœç‰† <a href="https://mde.tw/cp2025/reeborg/src/images/north.png">north.png</a> èˆ‡å‚ç›´åœç‰† <a href="https://mde.tw/cp2025/reeborg/src/images/east.png">east.png</a> æª”æ¡ˆä¹‹å¤–ï¼ŒåŠ å…¥ <a href="https://mde.tw/cp2025/reeborg/src/images/carrot.png">carrot.png</a>ã€<a href="https://mde.tw/cp2025/reeborg/src/images/grass.png">grass.png</a> èˆ‡ <a href="https://mde.tw/cp2025/reeborg/src/images/pale_grass.png">pale_grass.png</a> ç­‰åœ–æª”ã€‚ä¸¦ä¸”æ“´å……å¯å¾ URL è®€é€² json æ ¼å¼çš„ world è®Šæ•¸åŠŸèƒ½ï¼Œä»¥ä¾¿è£½ä½œå‡ºæ›´å¤šå…ƒçš„å ´æ™¯ä»»å‹™ï¼Œè¦æ±‚æ©Ÿå™¨äººåŸ·è¡Œã€‚</p>
<p>å…¶ä¸­ src URL è®Šæ•¸ï¼Œå¯ä»¥å°‡ç¶²è·¯ä¸Šçš„æ©Ÿå™¨äººæ§åˆ¶ç¨‹å¼å°å…¥ Pyodide3 é é¢å¤–ï¼Œworld URL è®Šæ•¸å‰‡å¯ä»¥å°å…¥æºè‡ª <a href="https://mde.tw/reeborg">Reeborg</a> æ©Ÿå™¨äººç¨‹å¼æ‰€è¨­å®šçš„ json æ ¼å¼å ´æ™¯ã€‚</p>
<p>ç”±æ–¼ Reeborg ç³»çµ±ä¸­çš„ png åœ–æª”å‡éé€æ˜èƒŒæ™¯ï¼Œ<a href="https://gist.githubusercontent.com/mdecycu/ec4bb35dd0769e7a83d2a9fa57878a67/raw/9f43571ec070ea3e24b083525ee27275a96efcc8/robot_w_world.py">robot_w_world.py</a>Â å¿…é ˆåˆ©ç”¨ HTML ä¸­çš„ CANVASï¼Œå°‡é—œéµçš„ç™½è‰²èƒŒæ™¯ï¼Œä»¥é€æ˜çš„æ–¹å¼é¡¯ç¤ºã€‚</p>
<p>src URL è®Šæ•¸è®€é€² <a href="https://gist.githubusercontent.com/mdecycu/ec4bb35dd0769e7a83d2a9fa57878a67/raw/8ac3ce859d6aec327b7859e091168270d6a951f7/pyodide2_turn_right.py">turn_right ç¨‹å¼</a>ï¼Œè€Œ world URL è®Šæ•¸å‰‡è®€é€² <a href="https://gist.githubusercontent.com/mdecycu/ec4bb35dd0769e7a83d2a9fa57878a67/raw/43517f3f54a5ac24d55d5a5cf8d316e6db2f3b65/harvest2.json">harvest2.json</a>ï¼ŒåŸ·è¡Œ<a href="https://mde.tw/cp2025/content/Pyodide3.html?src=https://gist.githubusercontent.com/mdecycu/ec4bb35dd0769e7a83d2a9fa57878a67/raw/8ac3ce859d6aec327b7859e091168270d6a951f7/pyodide2_turn_right.py&amp;world=https://gist.githubusercontent.com/mdecycu/ec4bb35dd0769e7a83d2a9fa57878a67/raw/43517f3f54a5ac24d55d5a5cf8d316e6db2f3b65/harvest2.json">çµæœ</a>ã€‚</p>
<p>è®€é€² <a href="https://gist.githubusercontent.com/mdecycu/ec4bb35dd0769e7a83d2a9fa57878a67/raw/1b1c26eca7f5d772c6301bae865efaddb00a87bb/harvest3.json">harvest3.json</a>, åŸ·è¡Œ<a href="https://mde.tw/cp2025/content/Pyodide3.html?src=https://gist.githubusercontent.com/mdecycu/ec4bb35dd0769e7a83d2a9fa57878a67/raw/8ac3ce859d6aec327b7859e091168270d6a951f7/pyodide2_turn_right.py&amp;world=https://gist.githubusercontent.com/mdecycu/ec4bb35dd0769e7a83d2a9fa57878a67/raw/9f43571ec070ea3e24b083525ee27275a96efcc8/harvest3.json">çµæœ</a>ã€‚</p>
<p>
<script src="https://cdn.jsdelivr.net/pyodide/v0.26.4/full/pyodide.js"></script>
</p>
<p><button id="version">version</button> <button id="hello_button">hello</button> <button id="add1to100">1 add to 100</button> <button id="robot1">æ©Ÿå™¨äººå·¡é‚</button> <button id="free_walk">è‡ªç”±è¡Œ</button> <button id="numpy_ode">numpy_ode</button></p>
<!-- Ace Editor Scripts -->
<p>
<script src="/static/ace/FileSaver.min.js"></script>
<script src="/static/ace/filereader.js"></script>
<script src="/static/ace/ace.js"></script>
<script src="/static/ace/ext-language_tools.js"></script>
<script src="/static/ace/mode-python.js"></script>
<script src="/static/ace/snippets/python.js"></script>
</p>
<!-- Editor 1 -->
<div id="kw_editor1" style="width: 600px; height: 300px;"></div>
<p><button id="kw_run1">Run</button> <button id="kw_output1">Output</button> <button id="kw_clear_console1">æ¸…é™¤è¼¸å‡ºå€</button> <button onclick="location.reload()">Reload</button></p>
<p><textarea id="kw_console1"></textarea></p>
<div id="pyodide_div1"></div>
<div id="mpl_output1"></div>
<div id="brython_div1"></div>
<hr/>
<p>å¾ 1 ç´¯åŠ åˆ° 100 part2:</p>
<p><button id="add1to100part2">1 add to 100</button></p>
<!-- Editor 2 -->
<div id="kw_editor2" style="width: 600px; height: 300px;"></div>
<p><button id="kw_run2">Run</button> <button id="kw_output2">Output</button> <button id="kw_clear_console2">æ¸…é™¤è¼¸å‡ºå€</button> <button onclick="location.reload()">Reload</button></p>
<p><textarea id="kw_console2"></textarea></p>
<div id="pyodide_div2"></div>
<div id="mpl_output2"></div>
<div id="brython_div2"></div>
<p>
<script>
function getUrlParam(key) {
  return new URLSearchParams(window.location.search).get(key);
}
function updateUrlParam(key, value) {
  const url = new URL(window.location);
  url.searchParams.set(key, value);
  window.history.replaceState({}, "", url);
}

let pyodide, editor1, editor2;

// æ–°å¢ï¼šæŠŠ robot_w_world.py å¯«å…¥ pyodide FS
async function loadRobotModule() {
  const robotUrl = "https://gist.githubusercontent.com/mdecycu/ec4bb35dd0769e7a83d2a9fa57878a67/raw/9f43571ec070ea3e24b083525ee27275a96efcc8/robot_w_world.py";
  const r = await fetch(robotUrl);
  if (!r.ok) throw new Error(`è¼‰å…¥ robot.py å¤±æ•—: ${r.status}`);
  const code = await r.text();
  pyodide.FS.writeFile("/robot.py", code);
  pyodide.runPython(`import sys; sys.path.append("/")`);  // åŠ å…¥æ ¹ç›®éŒ„åˆ° sys.path
}

document.addEventListener("DOMContentLoaded", async () => {
  editor1 = ace.edit("kw_editor1");
  editor1.setTheme("ace/theme/chrome");
  editor1.session.setMode("ace/mode/python");

  editor2 = ace.edit("kw_editor2");
  editor2.setTheme("ace/theme/chrome");
  editor2.session.setMode("ace/mode/python");

  pyodide = await loadPyodide();
  await pyodide.loadPackage(["numpy", "scipy", "matplotlib", "micropip"]);

  // é å…ˆè¼‰å…¥ robot.py
  await loadRobotModule();

  // ä½ ç¾æœ‰çš„ hello() å®šç¾©
  const code = `
def hello():
    print("Hello from custom module!")
`;
  pyodide.runPython(code);

  // é€™æ˜¯ä½ ä¹‹å‰å…¶ä»–æŒ‰éˆ•ç”¨çš„ Gist é€£çµ
  const GIST_ADD1TO100 =
    "https://gist.githubusercontent.com/mdecourse/0229a8a017091476a79700b8a190f185/raw/" +
    "c48e37714f055c3a0027cbfef59e442a6ef659b9/from_1_add_to_100_1.py";
  const NUMPY_ODE =
    "https://gist.githubusercontent.com/mdecycu/ec4bb35dd0769e7a83d2a9fa57878a67/raw/" +
    "98d582539545b3c9fbfa35dd3e605c506367618e/pyodide_ode_ex1.py";
  const PYODIDE_ROBOT_ANIMATION =
    "https://gist.githubusercontent.com/mdecycu/ec4bb35dd0769e7a83d2a9fa57878a67/raw/" +
    "ff833d14181c7e270d37432aa8589f5ecf00e383/pyodide_walk_around2.py";
  const FREE_WALK = 
    "https://gist.githubusercontent.com/mdecycu/ec4bb35dd0769e7a83d2a9fa57878a67/raw/" + "2a66dceb4a1dbdd0c384d4d17453f1e4f03f2493/pyodide_free_walk2.py"

  // é è¨­è¼‰å…¥ GIST_ADD1TO100ï¼ˆæˆ– URL åƒæ•¸æ±ºå®šï¼‰
  const src = getUrlParam("src");
  if (src === PYODIDE_ROBOT_ANIMATION) {
    const robotCode = await fetchCode(PYODIDE_ROBOT_ANIMATION);
    editor1.setValue(robotCode, -1);
    updateUrlParam("src", PYODIDE_ROBOT_ANIMATION);
    runPyodide(editor1, "kw_console1", "brython_div1");
  } else {
    const initialCode = await fetchCode(src || GIST_ADD1TO100);
    editor1.setValue(initialCode, -1);
    runPyodide(editor1, "kw_console1", "brython_div1");
  }

  editor2.setValue("", -1);

  // æŒ‰éˆ•äº‹ä»¶
  document.getElementById("version").onclick = () => {
    const vcode = `
import pyodide
import sys
import matplotlib
import numpy
import scipy
print("Pyodide version:", pyodide.__version__)
print("Python version :", sys.version)
print("matplotlib version:", matplotlib.__version__)
print("numpy version:", numpy.__version__)
print("scipy version:", scipy.__version__)
`;
    editor1.setValue(vcode, -1);
    updateUrlParam("src", "inline_version");
    runPyodide(editor1, "kw_console1", "brython_div1");
  };

  document.getElementById("hello_button").onclick = () => {
    editor1.setValue("hello()", -1);
    updateUrlParam("src", "inline_hello");
    runPyodide(editor1, "kw_console1", "brython_div1");
  };

  document.getElementById("add1to100").onclick = async () => {
    const c = await fetchCode(GIST_ADD1TO100);
    editor1.setValue(c, -1);
    updateUrlParam("src", GIST_ADD1TO100);
    runPyodide(editor1, "kw_console1", "brython_div1");
  };

  document.getElementById("numpy_ode").onclick = async () => {
    const c = await fetchCode(NUMPY_ODE);
    editor1.setValue(c, -1);
    updateUrlParam("src", NUMPY_ODE);
    runPyodide(editor1, "kw_console1", "brython_div1");
  };

  document.getElementById("robot1").onclick = async () => {
    const rc = await fetchCode(PYODIDE_ROBOT_ANIMATION);
    editor1.setValue(rc, -1);
    updateUrlParam("src", PYODIDE_ROBOT_ANIMATION);
    runPyodide(editor1, "kw_console1", "brython_div1");
  };

  document.getElementById("free_walk").onclick = async () => {
    const rc = await fetchCode(FREE_WALK);
    editor1.setValue(rc, -1);
    updateUrlParam("src", FREE_WALK);
    runPyodide(editor1, "kw_console1", "brython_div1");
  };

  document.getElementById("add1to100part2").onclick = async () => {
    const c = await fetchCode(GIST_ADD1TO100);
    editor2.setValue(c, -1);
    runPyodide(editor2, "kw_console2", "brython_div2");
  };

  document.getElementById("kw_run1").onclick = () =>
    runPyodide(editor1, "kw_console1", "brython_div1");
  document.getElementById("kw_run2").onclick = () =>
    runPyodide(editor2, "kw_console2", "brython_div2");
  document.getElementById("kw_clear_console1").onclick = () =>
    clearOutput("kw_console1", "brython_div1");
  document.getElementById("kw_clear_console2").onclick = () =>
    clearOutput("kw_console2", "brython_div2");
});

// èª¿æ•´ output textarea è¡Œæ•¸
document.getElementById("kw_output1").onclick = () => {
  const ta = document.getElementById("kw_console1");
  ta.rows = "15";
  ta.cols = "70";
  ta.scrollTop = 0;
};
document.getElementById("kw_output2").onclick = () => {
  const ta = document.getElementById("kw_console2");
  ta.rows = "15";
  ta.cols = "70";
  ta.scrollTop = 0;
};

async function fetchCode(url) {
  const r = await fetch(url);
  if (!r.ok) throw new Error(`è¼‰å…¥å¤±æ•— ${r.status}`);
  return await r.text();
}

function clearOutput(consoleId, divId) {
  document.getElementById(consoleId).value = "";
  document.getElementById(divId).innerHTML = "";
}

async function runPyodide(editor, consoleId, divId) {
  document.getElementById(consoleId).value = "";
  document.getElementById(divId).innerHTML = "";

  await pyodide.runPythonAsync(`
import sys
class JsWriter:
  def write(self, s):
    from js import document
    ta = document.getElementById("${consoleId}")
    ta.value += s
    ta.scrollTop = ta.scrollHeight
sys.stdout = JsWriter()
sys.stderr = JsWriter()
`);

  try {
    await pyodide.runPythonAsync(editor.getValue());
  } catch (e) {
    document.getElementById(consoleId).value += "\\néŒ¯èª¤ï¼š" + e.toString();
  }
}
</script>
</p>